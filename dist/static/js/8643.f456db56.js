"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[8643],{28643:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var a=s(66252),i=s(3577);const l={class:"message-board"},c={class:"top"},n=(0,a._)("div",{class:"circle"},[(0,a._)("span",null,"1")],-1),d=(0,a._)("span",null," 未读 ",-1),r=[n,d],o={class:"messages"},m={class:"mes-title"},u=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[(0,a._)("circle",{cx:"8",cy:"8",r:"8"})],-1),v={class:"mes-date"},_={class:"mes-cont"},h=(0,a._)("span",{class:"morelink"},"查看全文",-1);function g(e,t,s,n,d,g){return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",c,[(0,a._)("div",{class:(0,i.C_)(["all mescat","all"===d.activeclass?"activemescat":""]),onClick:t[0]||(t[0]=e=>g.setActive("all"))}," 全部 ",2),(0,a._)("div",{class:(0,i.C_)(["read mescat","read"===d.activeclass?"activemescat":""]),onClick:t[1]||(t[1]=e=>g.setActive("read"))}," 已读 ",2),(0,a._)("div",{class:(0,i.C_)(["unreaded mescat","unread"===d.activeclass?"activemescat":""]),onClick:t[2]||(t[2]=e=>g.setActive("unread"))},r,2),(0,a._)("div",{class:"read-all",onClick:t[3]||(t[3]=e=>g.readAll(!0))},"全部已读")]),(0,a._)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.meslist,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["message",e.read?"":" unread"]),key:e.keyss},[(0,a._)("div",{class:(0,i.C_)(["mes-top",{readed:e.read}])},[(0,a._)("div",m,[u,(0,a.Uk)(" "+(0,i.zw)(e.title),1)]),(0,a._)("div",v,(0,i.zw)(e.date),1)],2),(0,a._)("div",_,[(0,a.Uk)((0,i.zw)(e.content)+">>",1),h])],2)))),128))])])}var p=s(30048),f=s(79737),k={components:{},data(){return{unreads:[],readed:[],activeclass:"all",meslist:[{keyss:"0001",title:"3.8好女神节，做自己的女王！",date:"2022年3月8日 14:01",content:"从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上"},{keyss:"0002",title:"3.8好女神节，做自己的女王！",date:"2022年3月8日 14:01",content:"从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上"},{keyss:"0003",title:"3.8好女神节，做自己的女王！",date:"2022年3月8日 14:01",content:"从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上"},{keyss:"0004",title:"3.8好女神节，做自己的女王！",date:"2022年3月8日 14:01",content:"从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上"},{keyss:"0005",title:"3.8好女神节，做自己的女王！",date:"2022年3月8日 14:01",content:"从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上"},{keyss:"0006",title:"3.8好女神节，做自己的女王！",date:"2022年3月8日 14:01",content:"从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上从其哪有坐上"}],showDialog:!1}},methods:{setActive(e){this.activeclass=e,"all"==e&&(this.meslist=this.meslist2),"read"==e&&(this.meslist=this.readed),"unread"==e&&(this.meslist=this.unread)},readAll(){f.T.confirm("全部已读信息会让当前页面所有信息变为已读状态，是否继续?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{}))}},async created(){let e=window.localStorage.getItem("userID");console.log("message page userid:"),console.log(e);let t=await(0,p.ZP)({method:"POST",url:"/api/e9b849a515a84327b424af7ccdbf2949/mobile/common/v1_0_0/notify/all/active",data:{is_active:!0,platform:10003,recipient_id:e},auth:{username:"NginxAuthUsername16381efa069a90cbde99854c81183036a4bd2e4776eb770fa69740f1c5c06aa4",password:"NginxAuthPassworde0588e3b3c5b240fe3f5fb653d2990f34b52ee0b595acf6553a924b0716cb366"},headers:{"Content-Type":"application/json"}});console.log("通知消息",t);let s=t.details.notify_generals,a=t.details.notify_users;s=s.map((e=>({keyss:"gen_"+e.id,title:e.title,date:e.date_created,content:e.content.text||"",read:!1}))),a=a.map((e=>({keyss:"user_"+e.id,title:e.title,date:e.date_created,content:e.content.text||"",read:12004==e.status})));let i=[...s,...a];this.meslist=i,this.meslist2=i;let l=[];i.map((e=>{0==e.read&&l.push(e),1==e.read&&this.readed.push(e)})),this.unread=l}},w=s(83744);const b=(0,w.Z)(k,[["render",g]]);var y=b}}]);
//# sourceMappingURL=8643.f456db56.js.map