{"version":3,"file":"static/js/5197.0f3b7a5e.js","mappings":"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","sources":["webpack://v3/./src/pages/internal/views/adminTools/couponAssign/CouponAssign.vue","webpack://v3/./src/pages/internal/views/adminTools/couponAssign/chilcomponents/orderList/OrderList.vue","webpack://v3/./src/pages/internal/views/adminTools/couponAssign/chilcomponents/orderList/childComponents/ListItem.vue","webpack://v3/./src/pages/internal/views/adminTools/couponAssign/chilcomponents/orderList/childComponents/ListItem.vue?f538","webpack://v3/./src/pages/internal/views/adminTools/couponAssign/chilcomponents/orderList/OrderList.vue?f4ab","webpack://v3/./src/pages/internal/views/adminTools/couponAssign/chilcomponents/distributeCoupon/DistributeCoupon.vue","webpack://v3/./src/pages/internal/views/adminTools/couponAssign/chilcomponents/distributeCoupon/DistributeCoupon.vue?e07a","webpack://v3/./src/pages/internal/views/adminTools/couponAssign/CouponAssign.vue?170f"],"sourcesContent":["<template>\n  <div id=\"couponAssign\">\n    <div class=\"tableHeader\">\n      <p>发布时间</p>\n      <p>用户ID</p>\n      <p>优惠券ID</p>\n      <p>生效时间</p>\n      <p>失效时间</p>\n      <p>发放理由</p>\n    </div>\n    <div class=\"divideLine\"></div>\n    <div class=\"emptyDiv\"></div>\n    <div class=\"content2\">\n      <order-list :list=\"listShow\"></order-list>\n      <div class=\"paginationZone\" v-show=\"listShow.length !== 0\">\n        <a-pagination\n          :total=\"listAll.length\"\n          :show-total=\"\n            (total, range) => `${range[0]}-${range[1]} of ${total} items`\n          \"\n          :page-size=\"pageSize\"\n          :default-current=\"1\"\n          v-model:current=\"currentPage\"\n        />\n      </div>\n      <empty-data-placeholder\n        v-if=\"listShow.length === 0\"\n        description=\"暂无工单数据\"\n      ></empty-data-placeholder>\n    </div>\n\n    <div class=\"fixedFullLoading\" v-show=\"isLoading\">\n      <a-space>\n        <a-spin size=\"large\"></a-spin>\n      </a-space>\n    </div>\n    <div class=\"bottom\">\n      <div class=\"user-wrap\">\n        <label for=\"user-id\">用户ID</label>\n        <input id=\"user-id\" type=\"text\" v-model=\"user_id\" />\n      </div>\n      <div class=\"button b1\" @click=\"refresh\">搜索</div>\n      <div class=\"button b2\" @click=\"showDistributeCouponDialog\">\n        发放优惠券\n      </div>\n    </div>\n\n    <div class=\"distribute-toast\" v-if=\"ifShowDistributeCoupon\">\n      <distribute-coupon\n        class=\"distribute-coupon\"\n        @hideDialog=\"hideDistributeCouponDialog\"\n        @distributeCoupon=\"distributeCoupon\"\n      ></distribute-coupon>\n    </div>\n  </div>\n</template>\n\n<script>\nimport EmptyDataPlaceholder from \"@/pages/internal/components/common/emptyDataPlaceholder/EmptyDataPlaceholder\";\nimport OrderList from \"@/pages/internal/views/adminTools/couponAssign/chilcomponents/orderList/OrderList\";\nimport DistributeCoupon from \"@/pages/internal/views/adminTools/couponAssign/chilcomponents/distributeCoupon/DistributeCoupon\";\nimport uuid from \"uuid\";\nimport { $getUserCoupon } from \"@/pages/internal/network/adminTools/coupon\";\n\nexport default {\n  name: \"e-CouponAssign\",\n  beforeRouteEnter(to, from, next) {\n    // ...\n    if (window.localStorage.getItem(\"isStaff\") === \"true\") {\n      window.localStorage.setItem(\"currentIndex010001\", 4);\n      next();\n    } else {\n      next({\n        path: \"/tools/login\",\n      });\n      window.localStorage.removeItem(\"list\");\n      window.localStorage.removeItem(\"order\");\n      window.localStorage.removeItem(\"currentIndex010001\");\n      window.localStorage.removeItem(\"userID\");\n      window.localStorage.removeItem(\"username\");\n      window.localStorage.removeItem(\"authToken\");\n      window.localStorage.removeItem(\"isStaff\");\n      window.localStorage.removeItem(\"isSuperUser\");\n      window.localStorage.removeItem(\"isProvider\");\n      window.localStorage.removeItem(\"providerID\");\n    }\n  },\n  data() {\n    return {\n      ifShowDistributeCoupon: false,\n      isLoading: false,\n      listAll: [],\n      listShow: [],\n      pageSize: 8,\n      currentPage: 1,\n      totalPage: 0,\n      isShowCoverPage: false,\n      showIndex: -1,\n      x: null,\n      y: null,\n      user_id: 1,\n    };\n  },\n  async mounted() {\n    let data = {\n      id: 1,\n    };\n    this.isLoading = true;\n    try {\n      const response = await $getUserCoupon(data);\n      console.log(\"coupon\", response);\n      const { Code, msg } = response;\n      // 获取当前登录用户所有工单数据\n      if (Code === 200 && msg === \"success\") {\n        console.log(response.details.coupons);\n        this.listAll = response.details.coupons.reverse(); // 将数据赋值给listAll\n        this.totalPage = Math.ceil(this.listAll.length / this.pageSize); // 重新计算totalPage\n        const tempListAll = window.JSON.parse(\n          window.JSON.stringify(this.listAll)\n        );\n        // 若listShow数组为空，则说明是首次加载组件\n        if (this.listShow.length === 0) {\n          this.listShow = tempListAll.slice(0, this.pageSize);\n        }\n        // 若进来页面时分页的currentPage和分页的totalPage相等，因为listAll的数据有可能进行了更新，所以需要更新listShow\n        if (this.currentPage === this.totalPage) {\n          this.listShow = tempListAll.slice(\n            this.pageSize * (this.currentPage - 1),\n            this.pageSize * this.currentPage\n          );\n        }\n      } else {\n        this.$toast.error(\"获取工单数据失败 \", 240);\n        console.log(\"获取工单数据失败 \");\n      }\n    } catch (err) {\n      this.$toast.error(\"获取工单数据失败  \", 240);\n      console.log(\"获取工单数据失败 \");\n    }\n    this.isLoading = false;\n  },\n  methods: {\n    showDistributeCouponDialog() {\n      this.ifShowDistributeCoupon = true;\n    },\n    hideDistributeCouponDialog() {\n      this.ifShowDistributeCoupon = false;\n    },\n\n    beforeUnloadHandler(e) {\n      if (this.updateMark) {\n        e.returnValue = \"离开此页面?\";\n      } else {\n        return;\n      }\n    },\n\n    async refresh() {\n      let data = {\n        id: this.user_id,\n      };\n      if (data.id === \"\" || !/^[0-9]*$/.test(data.id)) {\n        this.$toast.error(\"请输入正确的用户ID\", 240);\n        return;\n      }\n      this.isLoading = true;\n      try {\n        const response = await $getUserCoupon(data);\n        console.log(data.id);\n        const { Code, msg } = response;\n        // 获取当前登录用户所有工单数据\n        if (Code === 200 && msg === \"success\") {\n          console.log(response.details.coupons);\n          this.listAll = response.details.coupons.reverse(); // 将数据赋值给listAll\n          this.totalPage = Math.ceil(this.listAll.length / this.pageSize); // 重新计算totalPage\n          const tempListAll = window.JSON.parse(\n            window.JSON.stringify(this.listAll)\n          );\n          // 若listShow数组为空，则说明是首次加载组件\n          this.listShow = tempListAll.slice(0, this.pageSize);\n          // 若进来页面时分页的currentPage和分页的totalPage相等，因为listAll的数据有可能进行了更新，所以需要更新listShow\n          this.currentPage = 1;\n          this.listShow = tempListAll.slice(\n            this.pageSize * (this.currentPage - 1),\n            this.pageSize * this.currentPage\n          );\n        } else {\n          this.$toast.error(\"获取工单数据失败 \", 240);\n          console.log(\"获取工单数据失败 \");\n        }\n      } catch (err) {\n        this.$toast.error(\"获取工单数据失败  \", 240);\n        console.log(\"获取工单数据失败 \");\n      }\n      this.isLoading = false;\n    },\n  },\n  watch: {\n    currentPage(newVal) {\n      const tempListAll = window.JSON.parse(\n        window.JSON.stringify(this.listAll)\n      );\n      this.listShow = tempListAll.slice(\n        this.pageSize * (newVal - 1),\n        this.pageSize * newVal\n      );\n    },\n  },\n  components: {\n    EmptyDataPlaceholder,\n    OrderList,\n    DistributeCoupon,\n  },\n};\n</script>\n\n<style scoped>\n#couponAssign {\n  padding: 40px 60px 0px 60px;\n  font-family: \"siyuan\";\n  font-weight: lighter;\n  z-index: 2;\n}\n#couponAssign .tableHeader {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n  padding-top: 20px;\n}\n#couponAssign .tableHeader p {\n  text-align: center;\n  line-height: 50px;\n  font-size: 17px;\n  color: rgb(131, 131, 131);\n  height: 50px;\n\n  border-right: 2px solid #eee;\n  border-top: 2px solid #eee;\n  border-bottom: 2px solid #eee;\n}\n#couponAssign .tableHeader p:nth-child(1) {\n  width: 15%;\n  border-left: 2px solid #eee;\n}\n#couponAssign .tableHeader p:nth-child(2) {\n  width: 15%;\n}\n#couponAssign .tableHeader p:nth-child(3) {\n  width: 15%;\n}\n#couponAssign .tableHeader p:nth-child(4) {\n  width: 15%;\n}\n#couponAssign .tableHeader p:nth-child(5) {\n  width: 15%;\n}\n#couponAssign .tableHeader p:nth-child(6) {\n  width: 25%;\n}\n.content2 {\n  position: absolute;\n  top: 110px;\n  left: 300px;\n  right: 60px;\n  bottom: 100px;\n\n  overflow: hidden;\n\n  font-size: 18px;\n  text-align: center;\n\n  z-index: 1;\n}\n.paginationZone {\n  text-align: center;\n  padding-top: 20px;\n  padding-bottom: 20px;\n}\n.fixedFullLoading {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(1, 1, 1, 0.1);\n  z-index: 10;\n  display: flex;\n  justify-content: center;\n}\n.bottom {\n  position: fixed;\n  border-top: 1px solid #eee;\n  bottom: 0;\n  right: 0;\n  width: calc(100% - 240px);\n  height: 100px;\n}\n.button {\n  width: 140px;\n  height: 40px;\n  background-color: #93d500;\n  color: #fff;\n  text-align: center;\n  line-height: 40px;\n  font-size: 18px;\n  border-radius: 5px;\n\n  position: absolute;\n\n  bottom: 30px;\n}\n.b1 {\n  left: 300px;\n}\n.b2 {\n  right: 300px;\n}\n.user-wrap {\n  position: absolute;\n  bottom: 35px;\n  left: 50px;\n}\n.distribute-toast {\n  position: fixed;\n  top: 100px;\n  right: 400px;\n  z-index: 1;\n}\n</style>\n","<template>\n  <div id=\"order-list\">\n    <div v-for=\"(item, index) in list\" :key=\"item.id\" class=\"list-item\">\n      <list-item :item=\"item\" :index=\"index\"></list-item>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ListItem from \"./childComponents/ListItem.vue\";\nexport default {\n  name: \"e-Orderlist\",\n  props: {\n    list: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n  },\n  methods: {\n    viewDetails(event) {\n      var e = event || window.event;\n\n      let b = { x: e.clientX, y: e.clientY };\n      console.log(\"client:\");\n      console.log(b); // yes\n    },\n  },\n  components: {\n    ListItem,\n  },\n};\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"list-item\">\n    <div class=\"order-content\">\n      <div>{{ setDate(item.date_created) }}</div>\n      <div>{{ item.user }}</div>\n      <div>{{ item.coupon.id }}</div>\n      <div>{{ setDate(item.date_start) }}</div>\n      <div>{{ setDate(item.date_expired) }}</div>\n      <div>{{ item.create_reason }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { UrlDecode, processDate } from \"../../../../../../common/utils\";\n\nexport default {\n  name: \"e-AssignListItem\",\n  props: {\n    item: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    index: {\n      type: Number,\n    },\n  },\n  data() {\n    return {};\n  },\n  mounted() {\n    this.$nextTick(() => {});\n  },\n  methods: {\n    setDate(text) {\n      return processDate(text);\n    },\n  },\n  components: {},\n};\n</script>\n\n<style scoped>\n.list-item {\n  width: 100%;\n}\n\n.list-item .order-content {\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  font-weight: normal;\n  color: #000;\n}\n\n.list-item .order-content > div {\n  /* 在包裹文字的元素上加上overflow-wrap和word-wrap实现宽度不够以致于不能一行展示给定文本时进行自动的换行 */\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  height: 55px;\n  line-height: 55px;\n\n  border-right: 2px solid #eee;\n  border-bottom: 2px solid #eee;\n\n  white-space: nowrap;\n  overflow-y: hidden;\n  user-select: text;\n}\n\n.list-item .order-content > div::-webkit-scrollbar {\n  display: none;\n}\n\n.list-item .order-content div:nth-child(1) {\n  border-left: 2px solid #eee;\n}\n\n.list-item .order-content div:nth-child(1),\n.list-item .order-content div:nth-child(2),\n.list-item .order-content div:nth-child(3),\n.list-item .order-content div:nth-child(4),\n.list-item .order-content div:nth-child(5) {\n  width: 15%;\n}\n\n.list-item .order-content div:nth-child(6) {\n  width: 25%;\n}\n</style>\n","import { render } from \"./ListItem.vue?vue&type=template&id=3a5f2ccc&scoped=true\"\nimport script from \"./ListItem.vue?vue&type=script&lang=js\"\nexport * from \"./ListItem.vue?vue&type=script&lang=js\"\n\nimport \"./ListItem.vue?vue&type=style&index=0&id=3a5f2ccc&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/qirong77/Desktop/projects/Peterpan/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3a5f2ccc\"]])\n\nexport default __exports__","import { render } from \"./OrderList.vue?vue&type=template&id=731c71e5\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/qirong77/Desktop/projects/Peterpan/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"distributeCoupon\">\n    <div class=\"top\">\n      <div class=\"cancel\" @click=\"hideDialog\"></div>\n    </div>\n    <div class=\"title\">发放优惠券</div>\n    <div class=\"form\">\n      <div class=\"form-item user-id\">\n        <label for=\"user-id\">用户ID</label>\n        <input\n          type=\"text\"\n          placeholder=\"\"\n          id=\"user-id\"\n          class=\"form-item-content\"\n          v-model=\"monitoredMixedObj.user_id\"\n          ref=\"userid\"\n        />\n      </div>\n      <div class=\"form-item coupon-id\">\n        <label for=\"coupon-id\">优惠券ID</label>\n        <input\n          type=\"text\"\n          placeholder=\"\"\n          id=\"coupon-id\"\n          class=\"form-item-content\"\n          v-model=\"monitoredMixedObj.coupon_id\"\n          ref=\"couponid\"\n        />\n      </div>\n      <div class=\"form-item\">\n        <label for=\"start_date\">生效时间</label>\n        <input\n          id=\"start_date\"\n          type=\"date\"\n          v-model=\"monitoredMixedObj.start_date\"\n        />\n      </div>\n      <div class=\"form-item\">\n        <label for=\"expire_date\">失效时间</label>\n        <input\n          id=\"expire_date\"\n          type=\"date\"\n          v-model=\"monitoredMixedObj.expire_date\"\n        />\n      </div>\n    </div>\n    <div class=\"buttonZone\">\n      <button class=\"cancelBtn other-button\" @click=\"hideDialog\">取消</button>\n      <button class=\"ensureBtn submit-button\" @click=\"checkInput\">确认</button>\n    </div>\n\n    <div class=\"edit-reason\" v-show=\"ifShowEditReason\">\n      <edit-reason-dialog\n        @cancelClick=\"hideEditReason\"\n        @ensureClick=\"submit\"\n      ></edit-reason-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport uuid from \"uuid\";\nimport EditReasonDialog from \"@/pages/internal/components/content/adminTools/editReasonDialog/EditReasonDialog\";\nimport {\n  $createCoupon,\n  $distributeCoupon,\n} from \"@/pages/internal/network/adminTools/coupon\";\nexport default {\n  name: \"e-DistributeCoupon\",\n  data() {\n    return {\n      monitoredMixedObj: {\n        user_id: \"\",\n        coupon_id: \"\",\n        start_date: \"\",\n        expire_date: \"\",\n      },\n      ifShowEditReason: false,\n    };\n  },\n  created() {\n    this.$nextTick(() => {\n      this.$refs.userid.focus();\n    });\n  },\n  methods: {\n    hideDialog() {\n      this.$emit(\"hideDialog\");\n    },\n    checkInput() {\n      if (this.monitoredMixedObj.user_id === \"\") {\n        this.$toast.error(\"请填写用户ID\", 240);\n        return;\n      }\n      if (this.monitoredMixedObj.coupon_id === \"\") {\n        this.$toast.error(\"请完整填写优惠券ID\", 240);\n        return;\n      }\n      if (this.monitoredMixedObj.reason === \"\") {\n        this.$toast.error(\"请填写创建理由\", 240);\n        return;\n      }\n      this.showEditReason();\n    },\n    showEditReason() {\n      this.ifShowEditReason = true;\n    },\n    hideEditReason() {\n      this.ifShowEditReason = false;\n    },\n    async submit(edit_reason) {\n      let data = {\n        id: this.monitoredMixedObj.user_id, // user id\n        coupon_id: this.monitoredMixedObj.coupon_id,\n        date_start: this.monitoredMixedObj.start_date,\n        date_expired: this.monitoredMixedObj.expire_date,\n        create_reason: edit_reason,\n      };\n      try {\n        const response = await $distributeCoupon(data);\n        const { Code, msg } = response;\n        console.log(Code);\n        console.log(msg);\n        if (Code === 200 && msg === \"success\") {\n          this.$toast.success(\"提交成功\", 240);\n        } else {\n          this.$toast.error(\"提交失败\", 240);\n        }\n      } catch (e) {\n        this.$toast.error(\"提交失败\", 240);\n      }\n      this.hideEditReason();\n    },\n  },\n  watch: {},\n  components: {\n    EditReasonDialog,\n  },\n};\n</script>\n\n<style scoped>\n.distributeCoupon {\n  width: 600px;\n  height: 490px;\n  box-shadow: #ccc 0 0 8px;\n  background-color: #fff;\n  border-radius: 8px;\n\n  position: relative;\n  padding: 40px;\n}\n.top {\n  display: flex;\n}\n.title {\n  font-size: 23px;\n  margin-bottom: 20px;\n  font-weight: bold;\n}\n.distributeCoupon .cancel {\n  position: absolute;\n  right: 20px;\n  top: 18px;\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n\n  background: url(\"../../../../../assets/image/common/error_grey_64.svg\")\n    no-repeat center center;\n\n  transition: all 0.8s ease;\n}\n.distributeCoupon .cancel:hover {\n  background: url(\"../../../../../assets/image/common/error_white_64.svg\")\n    no-repeat center center #ccc;\n}\n.distributeCoupon .form .form-item {\n  display: flex;\n  width: 100%;\n  margin-bottom: 10px;\n\n  font-size: 20px;\n  color: #000;\n  align-items: center;\n}\n.distributeCoupon .form .form-item label {\n  width: 160px;\n}\n.distributeCoupon .form .form-item .form-item-content {\n}\n.distributeCoupon .form .form-item.rule .form-item-content input {\n  width: 100px;\n}\n\n.distributeCoupon .buttonZone {\n  text-align: right;\n}\n.distributeCoupon .buttonZone button:last-child {\n  margin-left: 50px;\n}\n\ninput {\n  border: none;\n  outline: none;\n  border-bottom: 2px solid #eee;\n  padding: 1px 5px;\n}\n\ntextarea {\n  resize: none;\n  width: 350px;\n  height: 100px;\n  border: 2px solid #eee;\n  outline: none;\n  padding: 3px 5px;\n  border-radius: 5px;\n}\n\nbutton {\n  font-size: 18px;\n  padding: 5px 20px;\n  border: 1px solid transparent;\n  border-radius: 20px;\n  outline: none;\n  cursor: pointer;\n  transition: all 0.5s ease;\n  -webkit-transition: all 0.5s ease;\n}\nbutton.ensureBtn {\n  background-color: var(--color-background-button-green);\n  color: #fff;\n}\nbutton:hover {\n  transform: scale(1.1);\n}\ninput,\noption,\nselect {\n  width: 350px;\n  height: 50px;\n  padding: 0 20px;\n  border-radius: 8px;\n  border: 1px solid #cccccc;\n}\n.edit-reason {\n  position: fixed;\n  right: 460px;\n  top: 200px;\n}\n</style>\n","import { render } from \"./DistributeCoupon.vue?vue&type=template&id=51e4d8ed&scoped=true\"\nimport script from \"./DistributeCoupon.vue?vue&type=script&lang=js\"\nexport * from \"./DistributeCoupon.vue?vue&type=script&lang=js\"\n\nimport \"./DistributeCoupon.vue?vue&type=style&index=0&id=51e4d8ed&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/qirong77/Desktop/projects/Peterpan/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-51e4d8ed\"]])\n\nexport default __exports__","import { render } from \"./CouponAssign.vue?vue&type=template&id=9744a69c&scoped=true\"\nimport script from \"./CouponAssign.vue?vue&type=script&lang=js\"\nexport * from \"./CouponAssign.vue?vue&type=script&lang=js\"\n\nimport \"./CouponAssign.vue?vue&type=style&index=0&id=9744a69c&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/qirong77/Desktop/projects/Peterpan/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9744a69c\"]])\n\nexport default __exports__"],"names":["id","_createElementVNode","class","for","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_order_list","list","$data","_component_a_pagination","total","length","range","current","$event","_createBlock","_component_empty_data_placeholder","description","_component_a_space","_component_a_spin","size","_hoisted_10","type","onClick","$options","_component_distribute_coupon","onHideDialog","onDistributeCoupon","_ctx","_Fragment","_renderList","$props","item","index","key","_component_list_item","_toDisplayString","date_created","user","coupon","date_start","date_expired","create_reason","name","props","Object","default","Number","data","mounted","this","$nextTick","methods","setDate","text","processDate","components","__exports__","Array","viewDetails","event","e","window","b","x","clientX","y","clientY","console","log","ListItem","_hoisted_6","placeholder","user_id","ref","_hoisted_8","coupon_id","start_date","_hoisted_12","expire_date","_component_edit_reason_dialog","onCancelClick","onEnsureClick","monitoredMixedObj","ifShowEditReason","created","$refs","userid","focus","hideDialog","$emit","checkInput","reason","showEditReason","$toast","error","hideEditReason","async","edit_reason","response","$distributeCoupon","Code","msg","success","watch","EditReasonDialog","beforeRouteEnter","to","from","next","localStorage","getItem","setItem","path","removeItem","ifShowDistributeCoupon","isLoading","listAll","listShow","pageSize","currentPage","totalPage","isShowCoverPage","showIndex","$getUserCoupon","details","coupons","reverse","Math","ceil","tempListAll","JSON","parse","stringify","slice","err","showDistributeCouponDialog","hideDistributeCouponDialog","beforeUnloadHandler","updateMark","returnValue","test","newVal","EmptyDataPlaceholder","OrderList","DistributeCoupon","render"],"sourceRoot":""}