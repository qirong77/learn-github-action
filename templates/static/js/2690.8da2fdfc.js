"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[2690],{5050:function(e,t,i){function n(e,t){let i=null;function n(...n){i&&clearTimeout(i),i=setTimeout((()=>{e.apply(this,n)}),t)}return n}function o(e){return String.fromCharCode(e)}function s(e=null){let t="";if(null!==e){for(let i=0;i<e.length;i+=1){const n=e.charAt(i);if("+"===n)t+=" ";else if("%"===n){const n=e.substring(i+1,i+3);parseInt(`0x${n}`)>127?(t+=decodeURI("%"+n.toString()+e.substring(i+3,i+9).toString()),i+=8):(t+=o(parseInt(`0x${n}`)),i+=2)}else t+=n}return t}}i.d(t,{Ds:function(){return n},EO:function(){return s},$i:function(){return a},lM:function(){return l},h3:function(){return c},mr:function(){return d},ss:function(){return h},v2:function(){return m},te:function(){return p},Zy:function(){return g},C_:function(){return b},Cj:function(){return w},HO:function(){return _},_e:function(){return v},d0:function(){return y}});var r="                                 \"$_#(=[>+.&']|~Ts2W5lzy0w!}*-;\\<bad7ouxHOZXvrjCQ9fp1NPnmRB@?^,`{YUASKigtMeGEL8hkIV4cJD36Fq)/%: ";function a(e){let t="";for(const i in t="",e)t+=r[e[i].charCodeAt(0)];return t}function l(e){let t="",i=null;for(const n in t="",i=new Map,r)i[r[n]]=n;for(const n in i[" "]=99,e)t+=String.fromCharCode(i[e[n]]);return t}function c(e){const t=e.split("").slice(0,10);return t[4]=".",t[7]=".",t.join("")}function d(e,t,i,n,o,s){const r=e,a=Number(t)<10?"0"+t:t,l=Number(i)<10?"0"+i:i,c=Number(n)<10?"0"+n.slice(1,2):n,d=Number(o)<10?"0"+o.slice(1,2):o,u=Number(s)<10?"0"+s.slice(1,2):s;return`${r}-${a}-${l}T${c}:${d}:${u}Z`}const u=e=>new Promise((t=>{setTimeout((()=>{e.style.backgroundColor="transparent",t()}),200)})),f=e=>new Promise((t=>{setTimeout((()=>{e.style.backgroundColor="red",t()}),200)}));async function h(e){return e.style.backgroundColor="red",await u(e),await f(e),await u(e),await f(e),await u(e),new Promise((e=>{e()}))}function m(e,t){const i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(let o=0;o<i.length;o++){const s=e[i[o]],r=t[n[o]],a=typeof s,l=typeof r;if(a!==l)return!1;if("object"===a&&"object"===l){const e=m(s,r);if(!e)return!1}else if("array"===a&&"array"===l){const e=p(s,r);if(!e)return!1}else if(s!==r)return!1}return!0}function p(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){if(typeof e[i]!==typeof t[i])return!1;if("object"===typeof e[i]&&"object"===typeof t[i]){const n=m(e[i],t[i]);if(!n)return!1}else if("array"===typeof e[i]&&"array"===typeof t[i]){const n=p(e[i],t[i]);if(!n)return!1}else if(e[i]!==t[i])return!1}return!0}const g=e=>{const t=e.split("\n"),i=t.filter((e=>e&&e.trim()));for(const n in i)i[n]=i[n].trim();return i};function b(e,t,i=.2){return new Promise(((n,o)=>{const s=new FileReader;s.readAsDataURL(e),s.onerror=()=>{o({code:"0000",msg:`图片读取失败，错误码为${s.error.code}`})},s.onload=()=>{const e=new Image;e.src=s.result,e.onload=()=>{const{width:o,height:s}=e,r=o/s;n(r<t-i||r>t+i?{code:"0010",msg:"图片长宽比例不符要求"}:{code:"1111",msg:"图片长宽比例符合要求"})}}}))}function w(e){const t=[];for(let i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}function _(e){const t=e.replace(/-/g,"."),i=t.replace("T"," ");return i.slice(0,16)}function v(e){return e.substring(0,e.lastIndexOf("."))}function y(){let e,t;return window.innerWidth?e=window.innerWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),window.innerHeight?t=window.innerHeight:document.body&&document.body.clientHeight&&(t=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(t=document.documentElement.clientHeight,e=document.documentElement.clientWidth),[e,t]}},30048:function(e,t,i){i.d(t,{I8:function(){return s},A:function(){return r},ZP:function(){return a}});var n=i(9669),o=i.n(n);const s={username:"NginxAuthUsername16381efa069a90cbde99854c81183036a4bd2e4776eb770fa69740f1c5c06aa4",password:"NginxAuthPassworde0588e3b3c5b240fe3f5fb653d2990f34b52ee0b595acf6553a924b0716cb366"},r={"Content-Type":"application/json"};function a(e){const t=o().create({baseURL:"",timeout:6e4});return t.interceptors.request.use((e=>e),(e=>{console.log(e)})),t.interceptors.response.use((e=>e.data),(e=>{console.log(e)})),t(e)}},83993:function(e,t,i){i.d(t,{Jv:function(){return n},i7:function(){return o},dt:function(){return s}});const n={1e4:"全平台",10001:"iOS",10002:"微信小程序",10003:"服务商"},o={12e3:"紧急",12003:"未读",12004:"已读",11001:"已生效",11e3:"紧急"},s={0:"满减类型"}},27623:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(66252),o=i(3577);const s={class:"empty-data-placeholder"};function r(e,t,i,r,a,l){const c=(0,n.up)("a-empty");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(c,null,{description:(0,n.w5)((()=>[(0,n._)("span",null,(0,o.zw)(i.description),1)])),_:1})])}var a={name:"e-EmptyDataPlaceholder",props:{description:{type:String,default:"暂无数据"}}},l=i(83744);const c=(0,l.Z)(a,[["render",r]]);var d=c},6819:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(66252),o=i(49963);const s=e=>((0,n.dD)("data-v-d3187952"),e=e(),(0,n.Cn)(),e),r={class:"editReasonDialogWrapper"},a={class:"edit-reason-dialog"},l=s((()=>(0,n._)("p",{class:"title"},"请填写编辑理由",-1))),c={class:"textAreaDiv"},d={class:"buttonDiv"};function u(e,t,i,s,u,f){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",a,[l,(0,n._)("p",{class:"cancel",onClick:t[0]||(t[0]=(...e)=>f.cancelClick&&f.cancelClick(...e))}),(0,n._)("div",c,[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.message=e),ref:"textarea"},null,512),[[o.nr,u.message]])]),(0,n._)("div",d,[(0,n._)("button",{class:"cancel other-button",onClick:t[2]||(t[2]=(...e)=>f.cancelClick&&f.cancelClick(...e))},"取消"),(0,n._)("button",{class:"submit other-button",onClick:t[3]||(t[3]=(...e)=>f.ensureClick&&f.ensureClick(...e))},"确认")])])])}var f={name:"e-EditReasonDialog",data(){return{message:""}},mounted(){this.$nextTick((()=>{this.$refs.textarea.focus()}))},methods:{ensureClick(){""!==this.message?this.$emit("ensureClick",this.message):this.$toast.error("请填写理由",240)},cancelClick(){this.$emit("cancelClick")}}},h=i(83744);const m=(0,h.Z)(f,[["render",u],["__scopeId","data-v-d3187952"]]);var p=m},82690:function(e,t,i){i.r(t),i.d(t,{default:function(){return _e}});var n=i(66252),o=i(49963);const s=e=>((0,n.dD)("data-v-7b36ee06"),e=e(),(0,n.Cn)(),e),r={id:"meslist"},a=s((()=>(0,n._)("div",{class:"tableHeader"},[(0,n._)("p",null,"发布时间"),(0,n._)("p",null,"发布平台"),(0,n._)("p",null,"用户名称"),(0,n._)("p",null,"私信标题"),(0,n._)("p",null,"创建原因"),(0,n._)("p",null,"状态")],-1))),l=s((()=>(0,n._)("div",{class:"divideLine"},null,-1))),c=s((()=>(0,n._)("div",{class:"emptyDiv"},null,-1))),d={class:"content2"},u={class:"paginationZone"},f={key:0,class:"fixedCoverPage"},h={class:"fixedFullLoading"},m={class:"bottom"},p={key:0,class:"add-toast"};function g(e,t,i,s,g,b){const w=(0,n.up)("order-list"),_=(0,n.up)("a-pagination"),v=(0,n.up)("empty-data-placeholder"),y=(0,n.up)("a-spin"),x=(0,n.up)("a-space"),C=(0,n.up)("add-mes-user");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",r,[a,l,c,(0,n._)("div",d,[(0,n.Wm)(w,{list:g.listShow},null,8,["list"]),(0,n.wy)((0,n._)("div",u,[(0,n.Wm)(_,{total:g.listAll.length,"show-total":(e,t)=>`${t[0]}-${t[1]} of ${e} items`,"page-size":g.pageSize,"default-current":1,current:g.currentPage,"onUpdate:current":t[0]||(t[0]=e=>g.currentPage=e)},null,8,["total","show-total","page-size","current"])],512),[[o.F8,0!==g.listShow.length]]),0===g.listShow.length?((0,n.wg)(),(0,n.j4)(v,{key:0,description:"暂无工单数据"})):(0,n.kq)("",!0)]),g.isShowCoverPage?((0,n.wg)(),(0,n.iD)("div",f)):(0,n.kq)("",!0),(0,n.wy)((0,n._)("div",h,[(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{size:"large"})])),_:1})],512),[[o.F8,g.isLoading]])]),(0,n._)("div",m,[(0,n._)("div",{class:"button b1",onClick:t[1]||(t[1]=e=>b.refresh(1e4))},"全平台"),(0,n._)("div",{class:"button b2",onClick:t[2]||(t[2]=e=>b.refresh(10001))},"iOS"),(0,n._)("div",{class:"button b3",onClick:t[3]||(t[3]=e=>b.refresh(10002))},"微信小程序"),(0,n._)("div",{class:"button b4",onClick:t[4]||(t[4]=(...e)=>b.showAddDialog&&b.showAddDialog(...e))},"发布私信")]),g.ifShowAdd?((0,n.wg)(),(0,n.iD)("div",p,[(0,n.Wm)(C,{class:"add-mes-user",onHideDialog:b.hideAddDialog},null,8,["onHideDialog"])])):(0,n.kq)("",!0)],64)}var b=i(27623);const w={id:"order-list"};function _(e,t,i,o,s,r){const a=(0,n.up)("list-item");return(0,n.wg)(),(0,n.iD)("div",w,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.list,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"list-item"},[(0,n.Wm)(a,{item:e,index:t},null,8,["item","index"])])))),128))])}var v=i(3577);const y={class:"list-item"},x={class:"order-content"},C={class:"status"};function k(e,t,i,o,s,r){return(0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("div",x,[(0,n._)("div",null,(0,v.zw)(r.setDate(i.item.date_created)),1),(0,n._)("div",null,(0,v.zw)(s.platform[i.item.platform]),1),(0,n._)("div",null,(0,v.zw)(i.item.title),1),(0,n._)("div",null,(0,v.zw)(i.item.recipient_id),1),(0,n._)("div",null,(0,v.zw)(i.item.create_reason),1),(0,n._)("div",null,[(0,n._)("div",C,(0,v.zw)(s.status[i.item.status]),1)])])])}var S=i(5050),D=i(83993),O={name:"e-MesListItem",props:{item:{type:Object,default(){return{}}},index:{type:Number}},data(){return{platform:D.Jv,status:D.i7}},mounted(){this.$nextTick((()=>{}))},methods:{VMUrlDecode(e){return(0,S.EO)(e)},viewDetailsClick(e){const t={x:e.clientX,y:e.clientY,index:this.index};this.$bus.$emit("viewDetailsClick",t)},setStatus(e){if(3200===e)return"待审核"},setModuleName(e){if(1200===e)return"热门类别"},setDate(e){return(0,S.h3)(e)}},components:{}},$=i(83744);const j=(0,$.Z)(O,[["render",k],["__scopeId","data-v-2c45b826"]]);var M=j,A={name:"e-Orderlist",props:{list:{type:Array,default(){return[]}}},methods:{viewDetails(e){var t=e||window.event;let i={x:t.clientX,y:t.clientY};console.log("client:"),console.log(i)}},components:{ListItem:M}};const P=(0,$.Z)(A,[["render",_]]);var I=P;const z=e=>((0,n.dD)("data-v-77103614"),e=e(),(0,n.Cn)(),e),E={class:"addMesProvider"},N={class:"top"},Z=z((()=>(0,n._)("div",{class:"title"},"发布私信",-1))),R={class:"form"},U={class:"form-item"},T=z((()=>(0,n._)("label",{for:"identity"},"接收人身份",-1))),W={type:"text",id:"identity",class:"form-item-content",value:"用户",ref:"identity",readonly:"readonly"},L={class:"form-item"},H=z((()=>(0,n._)("label",{for:"platform"},"发布平台",-1))),J=z((()=>(0,n._)("option",{value:"10000"},"全平台",-1))),V=z((()=>(0,n._)("option",{value:"10001"},"IOS",-1))),F=z((()=>(0,n._)("option",{value:"10002"},"微信小程序",-1))),q=[J,V,F],Y={class:"form-item"},B=z((()=>(0,n._)("label",{for:"user-id"},"服务商ID",-1))),X={class:"form-item"},K=z((()=>(0,n._)("label",{for:"title"},"私信标题",-1))),G={class:"form-item"},Q=z((()=>(0,n._)("label",{for:"content"},"私信内容",-1))),ee={class:"form-item"},te=z((()=>(0,n._)("label",{for:"reason"},"创建原因",-1))),ie={class:"form-item"},ne=z((()=>(0,n._)("label",{for:"status"},"私信状态",-1))),oe=z((()=>(0,n._)("option",{value:"12003"},"普通",-1))),se=z((()=>(0,n._)("option",{value:"12000"},"紧急",-1))),re=[oe,se],ae={class:"buttonZone"},le={class:"edit-reason"};function ce(e,t,i,s,r,a){const l=(0,n.up)("edit-reason-dialog");return(0,n.wg)(),(0,n.iD)("div",E,[(0,n._)("div",N,[(0,n._)("div",{class:"cancel",onClick:t[0]||(t[0]=(...e)=>a.hideDialog&&a.hideDialog(...e))})]),Z,(0,n._)("div",R,[(0,n._)("div",U,[T,(0,n._)("input",W,null,512)]),(0,n._)("div",L,[H,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.monitoredMixedObj.platform=e),id:"platform"},q,512),[[o.bM,r.monitoredMixedObj.platform]])]),(0,n._)("div",Y,[B,(0,n.wy)((0,n._)("input",{type:"text",placeholder:"请输入服务商ID",id:"user-id",class:"form-item-content","onUpdate:modelValue":t[2]||(t[2]=e=>r.monitoredMixedObj.user_id=e),ref:"recipient_id"},null,512),[[o.nr,r.monitoredMixedObj.user_id]])]),(0,n._)("div",X,[K,(0,n.wy)((0,n._)("input",{type:"text",placeholder:"请输入标题",id:"title",class:"form-item-content","onUpdate:modelValue":t[3]||(t[3]=e=>r.monitoredMixedObj.title=e),ref:"title"},null,512),[[o.nr,r.monitoredMixedObj.title]])]),(0,n._)("div",G,[Q,(0,n.wy)((0,n._)("textarea",{id:"content",placeholder:"  请输入内容",class:"form-item-content","onUpdate:modelValue":t[4]||(t[4]=e=>r.monitoredMixedObj.content=e),ref:"content"},null,512),[[o.nr,r.monitoredMixedObj.content]])]),(0,n._)("div",ee,[te,(0,n.wy)((0,n._)("input",{type:"text",placeholder:"请输入内容",id:"reason",class:"form-item-content","onUpdate:modelValue":t[5]||(t[5]=e=>r.monitoredMixedObj.reason=e),ref:"reason"},null,512),[[o.nr,r.monitoredMixedObj.reason]])]),(0,n._)("div",ie,[ne,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.monitoredMixedObj.status=e),id:"status"},re,512),[[o.bM,r.monitoredMixedObj.status]])]),(0,n._)("div",ae,[(0,n._)("button",{class:"cancelBtn other-button",onClick:t[7]||(t[7]=(...e)=>a.hideDialog&&a.hideDialog(...e))},"取消"),(0,n._)("button",{class:"ensureBtn submit-button",onClick:t[8]||(t[8]=(...e)=>a.checkInput&&a.checkInput(...e))}," 确认 ")]),(0,n.wy)((0,n._)("div",le,[(0,n.Wm)(l,{onCancelClick:a.hideEditReason,onEnsureClick:a.submit},null,8,["onCancelClick","onEnsureClick"])],512),[[o.F8,r.ifShowEditReason]])])])}var de=i(6819),ue=i(30048);function fe(e){return(0,ue.ZP)({method:"post",url:"/api/e9b849a515a84327b424af7ccdbf2949/v1_0_0/notify/user/all",data:window.JSON.stringify(e),auth:{username:"NginxAuthUsername16381efa069a90cbde99854c81183036a4bd2e4776eb770fa69740f1c5c06aa4",password:"NginxAuthPassworde0588e3b3c5b240fe3f5fb653d2990f34b52ee0b595acf6553a924b0716cb366"},headers:{"Content-Type":"application/json"}})}function he(e){return(0,ue.ZP)({method:"post",url:"/api/e9b849a515a84327b424af7ccdbf2949/web/v1_0_0/workticketaudit/submit",data:window.JSON.stringify(e),auth:{username:"NginxAuthUsername16381efa069a90cbde99854c81183036a4bd2e4776eb770fa69740f1c5c06aa4",password:"NginxAuthPassworde0588e3b3c5b240fe3f5fb653d2990f34b52ee0b595acf6553a924b0716cb366"},headers:{"Content-Type":"application/json"}})}var me={name:"e-AddMesProvider",data(){return{monitoredMixedObj:{user_id:"",platform:"10000",status:"12003",title:"",reason:"",content:""},ifShowEditReason:!1}},methods:{hideDialog(){this.$emit("hideDialog")},checkInput(){""!==this.monitoredMixedObj.user_id?""!==this.monitoredMixedObj.title?""!==this.monitoredMixedObj.reason?""!==this.monitoredMixedObj.content?this.showEditReason():this.$toast.error("请填写内容",240):this.$toast.error("请填写创建理由",240):this.$toast.error("请填写标题",240):this.$toast.error("请填写用户ID",240)},showEditReason(){this.ifShowEditReason=!0},hideEditReason(){this.ifShowEditReason=!1},async submit(e){this.hideEditReason();let t={user:{id:window.localStorage.getItem("userID")},version:"1.0.0",create_reason:e,work_line_id:1900,work_operation:4200,content:{send_id:window.localStorage.getItem("userID"),recipient_id:this.monitoredMixedObj.user_id,platform:this.monitoredMixedObj.platform,create_reason:this.monitoredMixedObj.reason,title:this.monitoredMixedObj.title,status:this.monitoredMixedObj.status,content:{text:this.monitoredMixedObj.content}}};console.log(t);try{const e=await he(t),{Code:i,msg:n}=e;200===i&&"success"===n?this.$toast.success("提交成功",240):this.$toast.error("提交失败",240)}catch(i){this.$toast.error("提交失败",240)}}},watch:{},components:{EditReasonDialog:de.Z}};const pe=(0,$.Z)(me,[["render",ce],["__scopeId","data-v-77103614"]]);var ge=pe,be={data(){return{listAll:[],listShow:[],pageSize:8,currentPage:1,totalPage:0,isShowCoverPage:!1,showIndex:-1,x:null,y:null,ifShowAdd:!1,isLoading:!1}},async mounted(){let e={is_active:!0,platform:1e4};this.isLoading=!0;try{const t=await fe(e);console.log(t);const{Code:i,msg:n}=t;if(200===i&&"success"===n){console.log(t.details.notifyusers),this.listAll=t.details.notifyusers.reverse(),this.totalPage=Math.ceil(this.listAll.length/this.pageSize);const e=window.JSON.parse(window.JSON.stringify(this.listAll));0===this.listShow.length&&(this.listShow=e.slice(0,this.pageSize)),this.currentPage===this.totalPage&&(this.listShow=e.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage))}else this.$toast.error("获取工单数据失败 ",240),console.log("获取工单数据失败 ")}catch(t){this.$toast.error("获取工单数据失败  ",240),console.log("获取工单数据失败 ")}this.isLoading=!1},methods:{showAddDialog(){this.ifShowAdd=!0},hideAddDialog(){this.ifShowAdd=!1},async refresh(e){let t={is_active:!0,platform:e};this.isLoading=!0;try{this.currentPage=1;const e=await fe(t);console.log(e);const{Code:i,msg:n}=e;if(200===i&&"success"===n){console.log(e.details.notifyusers),this.listAll=e.details.notifyusers.reverse(),this.totalPage=Math.ceil(this.listAll.length/this.pageSize);const t=window.JSON.parse(window.JSON.stringify(this.listAll));this.listShow=t.slice(0,this.pageSize),this.currentPage=1,this.listShow=t.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage)}else this.$toast.error("获取工单数据失败 ",240),console.log("获取工单数据失败 ")}catch(i){this.$toast.error("获取工单数据失败  ",240),console.log("获取工单数据失败 ")}this.$refs.scroll.scrollTo(0,0,400),setTimeout((()=>{this.$refs.scroll.refresh()}),200),this.isLoading=!1}},watch:{currentPage(e){const t=window.JSON.parse(window.JSON.stringify(this.listAll));this.listShow=t.slice(this.pageSize*(e-1),this.pageSize*e),this.$refs.scroll.scrollTo(0,0,400),setTimeout((()=>{this.$refs.scroll.refresh()}),200)}},components:{EmptyDataPlaceholder:b.Z,OrderList:I,AddMesUser:ge}};const we=(0,$.Z)(be,[["render",g],["__scopeId","data-v-7b36ee06"]]);var _e=we}}]);
//# sourceMappingURL=2690.8da2fdfc.js.map