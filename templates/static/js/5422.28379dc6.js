"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[5422],{92025:function(t,e,i){i.d(e,{lN:function(){return s},WA:function(){return o},Jv:function(){return n}});const s={1:"居民身份证",2:"护照"},o={1:"法人",2:"非法人组织",3:"个体工商户",4:"自然人"},n={1e4:"全平台",10001:"iOS",10002:"微信小程序",10003:"服务商"}},66069:function(t,e,i){i.r(e),i.d(e,{default:function(){return Y}});var s=i(66252),o=i(49963);const n=t=>((0,s.dD)("data-v-e0c509f2"),t=t(),(0,s.Cn)(),t),a={id:"message"},l=n((()=>(0,s._)("div",{class:"tableHeader"},[(0,s._)("p",null,"创建日期"),(0,s._)("p",null,"用户"),(0,s._)("p",null,"身份"),(0,s._)("p",null,"版本"),(0,s._)("p",null,"申请理由"),(0,s._)("p",null,"状态"),(0,s._)("p",null,"审核")],-1))),r=n((()=>(0,s._)("div",{class:"divideLine"},null,-1))),c={class:"paginationZone"},h={class:"right-absolute-flex"},d={class:"fixedFullLoading"},u={class:"absoluteScrollDialogStore"},g={class:"itemcontent",style:{"background-color":"#000",width:"0px",height:"0px","margin-left":"10px","margin-bottom":"3px"}},w={class:"details",style:{width:"0px",height:"0px","background-color":"#fff","box-shadow":"var(--color-text-grey) 0 0 7px",overflow:"hidden",position:"absolute","z-index":"9"}};function p(t,e,i,n,p,v){const f=(0,s.up)("order-list"),m=(0,s.up)("a-pagination"),C=(0,s.up)("empty-data-placeholder"),S=(0,s.up)("Scroll"),k=(0,s.up)("review-comment-dialog"),_=(0,s.up)("a-spin"),$=(0,s.up)("a-space"),b=(0,s.up)("product-ticket-content");return(0,s.wg)(),(0,s.iD)("div",a,[l,r,(0,s.Wm)(S,{class:"content2","probe-type":3,ref:"scroll"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{list:p.listShow},null,8,["list"]),(0,s.wy)((0,s._)("div",c,[(0,s.Wm)(m,{total:p.listAll.length,"show-total":(t,e)=>`${e[0]}-${e[1]} of ${t} items`,"page-size":p.pageSize,"default-current":1,current:p.currentPage,"onUpdate:current":e[0]||(e[0]=t=>p.currentPage=t)},null,8,["total","show-total","page-size","current"])],512),[[o.F8,0!==p.listShow.length]]),0===p.listShow.length?((0,s.wg)(),(0,s.j4)(C,{key:0,description:"暂无工单数据"})):(0,s.kq)("",!0)])),_:1},512),(0,s.wy)((0,s._)("div",h,[(0,s.Wm)(k,{onCancel:v.cancelClick,onEnsure:v.ensureClick,ref:"inputReasonMessage"},null,8,["onCancel","onEnsure"])],512),[[o.F8,p.isShowRightCoverZone]]),(0,s.wy)((0,s._)("div",d,[(0,s.Wm)($,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{size:"large"})])),_:1})],512),[[o.F8,p.isLoading]]),(0,s._)("div",u,[(0,s._)("div",g,[(0,s.wy)((0,s._)("div",w,[(0,s._)("p",{class:"imageZone",onClick:e[1]||(e[1]=t=>v.hideViewDialog())}),(0,s.Wm)(S,{ref:"roll",class:"content3"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{ticketContent:p.activeViewItem},null,8,["ticketContent"])])),_:1},512)],512),[[o.F8,p.viewBoardVisible]])])])])}var v=i(467),f=i(61755),m=i(19755),C=i.n(m),S=i(13004),k=i(40483),_=i(3577);const $=t=>((0,s.dD)("data-v-59a09b8e"),t=t(),(0,s.Cn)(),t),b={class:"boardContent"},x={class:"infocontentWrapper"},y=$((()=>(0,s._)("div",{class:"infotitle"},"公告标题",-1))),R={class:"infocontent"},I={class:"infocontentWrapper"},P=$((()=>(0,s._)("div",{class:"infotitle"},"公告内容",-1))),z={class:"infocontent"},D={class:"infocontentWrapper"},W=$((()=>(0,s._)("div",{class:"infotitle"},"创建原因",-1))),Z={class:"infocontent"},A={class:"infocontentWrapper"},M=$((()=>(0,s._)("div",{class:"infotitle"},"发布平台",-1))),L={class:"infocontent"},N={class:"infocontentWrapper"},F=$((()=>(0,s._)("div",{class:"infotitle"},"发布状态",-1))),V={class:"infocontentUrgent"},j={class:"infocontentActivate"},O={class:"infocontentInActivate"},J={class:"infocontentActivate"},T={class:"infocontentActivate"};function B(t,e,i,n,a,l){return(0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",x,[y,(0,s._)("div",R,(0,_.zw)(i.ticketContent.title),1)]),(0,s._)("div",I,[P,(0,s._)("div",z,(0,_.zw)(i.ticketContent.content?i.ticketContent.content.text:i.ticketContent.content),1)]),(0,s._)("div",D,[W,(0,s._)("div",Z,(0,_.zw)(i.ticketContent.create_reason),1)]),(0,s._)("div",A,[M,(0,s._)("div",L,(0,_.zw)(a.platform[i.ticketContent.platform]),1)]),(0,s._)("div",N,[F,(0,s.wy)((0,s._)("div",V," 紧 急 ",512),[[o.F8,11e3===Number(i.ticketContent.status)||12e3===Number(i.ticketContent.status)]]),(0,s.wy)((0,s._)("div",j," 使用中 ",512),[[o.F8,11001===Number(i.ticketContent.status)]]),(0,s.wy)((0,s._)("div",O," 已停用 ",512),[[o.F8,11002===Number(i.ticketContent.status)]]),(0,s.wy)((0,s._)("div",J," 未 读 ",512),[[o.F8,12003===Number(i.ticketContent.status)]]),(0,s.wy)((0,s._)("div",T," 已 读 ",512),[[o.F8,12004===Number(i.ticketContent.status)]])])])}var E=i(92025),G={name:"e-ProductTicketContent",props:{ticketContent:{type:[Object,Array],default(){return[]}}},data(){return{platform:E.Jv}},methods:{}},U=i(83744);const H=(0,U.Z)(G,[["render",B],["__scopeId","data-v-59a09b8e"]]);var q=H,K=i(27623),Q={name:"e-message",data(){return{isLoading:!1,listAll:[],listShow:[],activeViewItem:[],isShowCoverPage:!1,viewBoardVisible:!1,isShowRightCoverZone:!1,activeRecordIndex:0,pageSize:8,currentPage:1,totalPage:0}},beforeRouteEnter(t,e,i){"true"===window.localStorage.getItem("isStaff")?(window.localStorage.setItem("currentIndex010003",10),i()):(i({path:"/tools/login"}),window.localStorage.removeItem("list"),window.localStorage.removeItem("order"),window.localStorage.removeItem("currentIndex010003"),window.localStorage.removeItem("userID"),window.localStorage.removeItem("username"),window.localStorage.removeItem("authToken"),window.localStorage.removeItem("isStaff"),window.localStorage.removeItem("isSuperUser"),window.localStorage.removeItem("isProvider"))},async mounted(){let t={work_line_id:1900};this.isLoading=!0;try{const e=await(0,f.p0)(t);console.log(e);const{Code:i,msg:s}=e;if(200===i&&"success"===s){console.log(e.details.tickets),this.listAll=e.details.tickets.reverse(),this.totalPage=Math.ceil(this.listAll.length/this.pageSize);const t=window.JSON.parse(window.JSON.stringify(this.listAll));0===this.listShow.length&&(this.listShow=t.slice(0,this.pageSize)),this.currentPage===this.totalPage&&(this.listShow=t.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage))}else this.$toast.error("获取工单数据失败 ",240),console.log("获取工单数据失败 ")}catch(e){this.$toast.error("获取工单数据失败  ",240),console.log("获取工单数据失败 ")}this.isLoading=!1,this.$bus.$on("viewDetailsClick",this.viewDetailsClick),this.$bus.$on("passClick",this.passClick),this.$bus.$on("passProduct",this.passProduct),this.$bus.$on("rejectClick",this.rejectClick)},unmounted(){this.$bus.$off("viewDetailsClick",this.viewDetailsClick),this.$bus.$off("passClick",this.passClick),this.$bus.$off("passProduct",this.passProduct),this.$bus.$off("rejectClick",this.rejectClick)},watch:{currentPage(t){const e=window.JSON.parse(window.JSON.stringify(this.listAll));this.listShow=e.slice(this.pageSize*(t-1),this.pageSize*t),this.$refs.scroll.scrollTo(0,0,400),setTimeout((()=>{this.$refs.scroll.refresh()}),200)}},methods:{passClick(t){this.activeRecordIndex=t,this.$refs.inputReasonMessage.word="通过",this.$refs.inputReasonMessage.message="",this.isShowRightCoverZone=!0,this.isShowCoverPage=!0},passProduct(t){console.log("product passClick item id : ",t),this.activeRecordId=t},viewDetailsClick(t){const{x:e,y:i,index:s}=t;this.x=e,this.y=i;const o=this.x,n=this.y;this.activeViewItem=this.listShow[s].content;const a=this,l=".details";let r;this.isShowCoverPage=!0;const c=document.body.clientWidth;let h;r=c<1e3?0:c>1e3&&c<1240?(c-1e3)/2:240+(c-240-1e3)/2;let d=document.body.clientHeight;h=d<680?0:(d-680)/2,C()(l).animate({left:o,top:n},50,(function(){a.viewBoardVisible=!0})),C()(l).animate({left:r,top:h,width:"100px",height:"100px"},100,(function(){a.$refs.roll.refresh(),a.$refs.roll.scrollTo(0,0,0)})),C()(l).animate({width:"1000px",height:"680px"},150)},rejectClick(t){this.activeRecordIndex=t,this.$refs.inputReasonMessage.word="拒绝",this.$refs.inputReasonMessage.message="",this.isShowRightCoverZone=!0,this.isShowCoverPage=!0},hideViewDialog(){const t=".details",e=this;C()(t).animate({width:"70px",height:"70px"},50),C()(t).animate({left:e.x,top:e.y,width:"0px",height:"0px"},200,(function(){e.isShowCoverPage=!1,e.viewBoardVisible=!1}))},cancelClick(){this.isShowCoverPage=!1,this.isShowRightCoverZone=!1},async ensureClick(t){if(""!==t){if(this.$refs.inputReasonMessage.ifShowLoadingGif=!0,console.log(this.$refs.inputReasonMessage.word),"通过"===this.$refs.inputReasonMessage.word){try{console.log("通过id和review comment"),console.log(this.listAll[this.activeRecordIndex].id,t);const e=await(0,f.Bb)({id:this.activeRecordId,review_comment:t});200==e.Code?(this.$toast.success("操作成功",240),this.$router.go(0)):(this.$toast.error("操作失败",240),this.$toast.error(e.Msg,240))}catch(e){this.$toast.error("操作失败",240)}this.$refs.inputReasonMessage.ifShowLoadingGif=!1,this.isShowCoverPage=!1,this.isShowRightCoverZone=!1}if("拒绝"===this.$refs.inputReasonMessage.word){try{console.log("通过id和review comment"),console.log(this.listAll[this.activeRecordIndex].id,t);const e=await(0,f.RL)({id:this.activeRecordId,review_comment:t});200==e.Code?(this.$toast.success("操作成功",240),this.$router.go(0)):(this.$toast.error("操作失败",240),this.$toast.error(e.Msg,240))}catch(e){this.$toast.error("操作失败",240)}this.$refs.inputReasonMessage.ifShowLoadingGif=!1,this.isShowCoverPage=!1,this.isShowRightCoverZone=!1}}else this.$toast.warn("编辑理由不能为空",240)}},components:{Scroll:v.Z,OrderList:S.Z,ReviewCommentDialog:k.Z,ProductTicketContent:q,EmptyDataPlaceholder:K.Z}};const X=(0,U.Z)(Q,[["render",p],["__scopeId","data-v-e0c509f2"]]);var Y=X}}]);
//# sourceMappingURL=5422.28379dc6.js.map