"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[4090],{79494:function(e,t,o){o.r(t),o.d(t,{default:function(){return W}});var i=o(66252);const s={id:"info"},a=(0,i.Uk)("搜索");function l(e,t,o,l,n,r){const d=(0,i.up)("el-input"),c=(0,i.up)("el-form-item"),h=(0,i.up)("el-button"),m=(0,i.up)("el-form"),u=(0,i.up)("el-table");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("header",null,[(0,i.Wm)(m,{modelValue:n.searchForm,"onUpdate:modelValue":t[2]||(t[2]=e=>n.searchForm=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{label:"公告标题"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{modelValue:n.searchForm.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchForm.title=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(c,{label:"信息分区"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{modelValue:n.searchForm.place,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchForm.place=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[a])),_:1})])),_:1},8,["modelValue"])]),(0,i.Wm)(u)])}var n=o(49963);const r=e=>((0,i.dD)("data-v-45f5f781"),e=e(),(0,i.Cn)(),e),d={class:"addInfo"},c={class:"top"},h=r((()=>(0,i._)("div",{class:"title"},"发布公告",-1))),m={class:"form"},u={class:"form-item"},g=r((()=>(0,i._)("label",{for:"title"},"公告标题",-1))),w={class:"form-item content"},f=r((()=>(0,i._)("label",{for:"content"},"公告内容",-1))),p={class:"form-item reason"},S=r((()=>(0,i._)("label",{for:"reason"},"创建原因",-1))),b={class:"form-item"},v=r((()=>(0,i._)("label",{for:"platform"},"发布平台",-1))),_=r((()=>(0,i._)("option",{value:"10000"},"全平台",-1))),I=r((()=>(0,i._)("option",{value:"10001"},"IOS",-1))),x=r((()=>(0,i._)("option",{value:"10002"},"微信小程序",-1))),O=[_,I,x],y={class:"form-item"},M=r((()=>(0,i._)("label",{for:"status"},"公告发布",-1))),k=r((()=>(0,i._)("option",{value:"11001"},"普通",-1))),D=r((()=>(0,i._)("option",{value:"11000"},"紧急",-1))),j=[k,D],C={class:"buttonZone"},E={class:"edit-reason"};function A(e,t,o,s,a,l){const r=(0,i.up)("edit-reason-dialog");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",c,[(0,i._)("div",{class:"cancel",onClick:t[0]||(t[0]=(...e)=>l.hideDialog&&l.hideDialog(...e))})]),h,(0,i._)("div",m,[(0,i._)("div",u,[g,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"请输入标题",id:"title",class:"form-item-content","onUpdate:modelValue":t[1]||(t[1]=e=>a.monitoredMixedObj.title=e),ref:"name"},null,512),[[n.nr,a.monitoredMixedObj.title]])]),(0,i._)("div",w,[f,(0,i.wy)((0,i._)("textarea",{id:"content",class:"form-item-content","onUpdate:modelValue":t[2]||(t[2]=e=>a.monitoredMixedObj.content=e),ref:"content"},null,512),[[n.nr,a.monitoredMixedObj.content]])]),(0,i._)("div",p,[S,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"",id:"reason",class:"form-item-content","onUpdate:modelValue":t[3]||(t[3]=e=>a.monitoredMixedObj.reason=e),ref:"reason"},null,512),[[n.nr,a.monitoredMixedObj.reason]])]),(0,i._)("div",b,[v,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.monitoredMixedObj.platform=e),id:"platform"},O,512),[[n.bM,a.monitoredMixedObj.platform]])]),(0,i._)("div",y,[M,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.monitoredMixedObj.status=e),id:"status"},j,512),[[n.bM,a.monitoredMixedObj.status]])])]),(0,i._)("div",C,[(0,i._)("button",{class:"cancelBtn other-button",onClick:t[6]||(t[6]=(...e)=>l.hideDialog&&l.hideDialog(...e))},"取消"),(0,i._)("button",{class:"ensureBtn submit-button",onClick:t[7]||(t[7]=(...e)=>l.checkInput&&l.checkInput(...e))},"确认")]),(0,i.wy)((0,i._)("div",E,[(0,i.Wm)(r,{onCancelClick:l.hideEditReason,onEnsureClick:l.submit},null,8,["onCancelClick","onEnsureClick"])],512),[[n.F8,a.ifShowEditReason]])])}var P=o(6819),V=o(92255),R={name:"e-AddInfo",data(){return{monitoredMixedObj:{platform:"10000",title:"",content:"",reason:"",status:"11001"},ifShowEditReason:!1}},methods:{hideDialog(){this.$emit("hideDialog")},checkInput(){""!==this.monitoredMixedObj.title?""!==this.monitoredMixedObj.content?""!==this.monitoredMixedObj.reason?(this.showEditReason(),console.log(this.ifShowEditReason)):this.$toast.error("请填写创建理由",240):this.$toast.error("请填写公告内容",240):this.$toast.error("请填写标题",240)},showEditReason(){this.ifShowEditReason=!0},hideEditReason(){this.ifShowEditReason=!1},async submit(e){this.hideEditReason();let t={user:{id:window.localStorage.getItem("userID")},version:"1.0.0",create_reason:e,work_line_id:1600,work_operation:4200,content:{send_id:6,send_id:Number(window.localStorage.getItem("userID")),platform:this.monitoredMixedObj.platform,create_reason:this.monitoredMixedObj.reason,title:this.monitoredMixedObj.title,status:this.monitoredMixedObj.status,content:{text:this.monitoredMixedObj.content}}};console.log(t);try{const e=await(0,V.mG)(t),{Code:o,msg:i}=e;200===o&&"success"===i?this.$toast.success("提交成功",240):this.$toast.error("提交失败",240)}catch(o){this.$toast.error("提交失败",240)}}},watch:{},components:{EditReasonDialog:P.Z}},$=o(83744);const U=(0,$.Z)(R,[["render",A],["__scopeId","data-v-45f5f781"]]);var z=U,L=(o(7667),o(467),o(59226)),N=o(27623),F={name:"e-InfoUser",beforeRouteEnter(e,t,o){"true"===window.localStorage.getItem("isStaff")?(window.localStorage.setItem("currentIndex010001",3),o()):(o({path:"/tools/login"}),window.localStorage.removeItem("list"),window.localStorage.removeItem("order"),window.localStorage.removeItem("currentIndex010001"),window.localStorage.removeItem("userID"),window.localStorage.removeItem("username"),window.localStorage.removeItem("authToken"),window.localStorage.removeItem("isStaff"),window.localStorage.removeItem("isSuperUser"),window.localStorage.removeItem("isProvider"),window.localStorage.removeItem("providerID"))},beforeRouteLeave(e,t,o){this.updateMark?confirm("还有修改未提交，确定离开？")?(this.couponList=window.JSON.parse(window.JSON.stringify(this.originalCouponList)),o()):(this.$bus.$emit("setCurrentIndex010001To3"),window.localStorage.setItem("currentIndex010001",3),o(!1)):o()},async mounted(){let e={is_active:!0,platform:"10000"};this.isLoading=!0;try{const t=await(0,V.yo)(e);console.log(t);const{Code:o,msg:i}=t;if(200===o&&"success"===i){console.log(t.details.notifygenerals),this.listAll=t.details.notifygenerals.reverse(),this.totalPage=Math.ceil(this.listAll.length/this.pageSize);const e=window.JSON.parse(window.JSON.stringify(this.listAll));0===this.listShow.length&&(this.listShow=e.slice(0,this.pageSize)),this.currentPage===this.totalPage&&(this.listShow=e.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage))}else this.$toast.error("获取工单数据失败 ",240),console.log("获取工单数据失败 ")}catch(t){this.$toast.error("获取工单数据失败  ",240),console.log("获取工单数据失败 ")}this.isLoading=!1},data(){return{ifShowAdd:!1,listAll:[],listShow:[],pageSize:8,currentPage:1,totalPage:0,isShowCoverPage:!1,showIndex:-1,x:null,y:null,isLoading:!1,searchForm:{title:"",place:""},tableData:[]}},methods:{showAddDialog(){this.ifShowAdd=!0},hideAddDialog(){this.ifShowAdd=!1},beforeUnloadHandler(e){this.updateMark&&(e.returnValue="离开此页面?")},async refresh(e){let t={is_active:!0,platform:e};this.isLoading=!0;try{const e=await(0,V.yo)(t);console.log(e);const{Code:o,msg:i}=e;if(200===o&&"success"===i){console.log(e.details.notifygenerals),this.tableData=e.details.notifygenerals.map(((e,t)=>({index:t,title:e.title,platform:e.platform,palce:""}))),this.listAll=e.details.notifygenerals.reverse(),this.totalPage=Math.ceil(this.listAll.length/this.pageSize);const t=window.JSON.parse(window.JSON.stringify(this.listAll));this.listShow=t.slice(0,this.pageSize),this.currentPage=1,this.listShow=t.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage)}else this.$toast.error("获取工单数据失败 ",240),console.log("获取工单数据失败 ")}catch(o){this.$toast.error("获取工单数据失败  ",240),console.log("获取工单数据失败 ")}this.isLoading=!1}},watch:{currentPage(e){const t=window.JSON.parse(window.JSON.stringify(this.listAll));this.listShow=t.slice(this.pageSize*(e-1),this.pageSize*e)}},components:{AddInfo:z,EditReasonDialog:P.Z,EmptyDataPlaceholder:N.Z,OrderList:L.Z}};const J=(0,$.Z)(F,[["render",l],["__scopeId","data-v-0ff47a5f"]]);var W=J}}]);
//# sourceMappingURL=4090.70482bb0.js.map