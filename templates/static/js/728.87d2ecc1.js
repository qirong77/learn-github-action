"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[728],{92025:function(e,t,i){i.d(t,{lN:function(){return s},WA:function(){return o},Jv:function(){return l}});const s={1:"居民身份证",2:"护照"},o={1:"法人",2:"非法人组织",3:"个体工商户",4:"自然人"},l={1e4:"全平台",10001:"iOS",10002:"微信小程序",10003:"服务商"}},77109:function(e,t,i){i.r(t),i.d(t,{default:function(){return ve}});var s=i(66252),o=i(49963);const l=e=>((0,s.dD)("data-v-76e749c0"),e=e(),(0,s.Cn)(),e),n={id:"category"},a=l((()=>(0,s._)("div",{class:"tableHeader"},[(0,s._)("p",null,"创建日期"),(0,s._)("p",null,"用户"),(0,s._)("p",null,"身份"),(0,s._)("p",null,"版本"),(0,s._)("p",null,"申请理由"),(0,s._)("p",null,"状态"),(0,s._)("p",null,"审核")],-1))),r=l((()=>(0,s._)("div",{class:"divideLine"},null,-1))),c=l((()=>(0,s._)("div",{class:"emptyDiv"},null,-1))),d={class:"paginationZone"},h={class:"right-absolute-flex"},u={key:0,class:"fixedCoverPage"},p={class:"absoluteScrollDialogStore"},g={class:"ticketContent",style:{"background-color":"#000",width:"0px",height:"0px","margin-left":"10px","margin-bottom":"3px"}},w={class:"details",style:{width:"0px",height:"0px","background-color":"#fff","box-shadow":"var(--color-text-grey) 0 0 7px",overflow:"hidden",position:"absolute","z-index":"9"}},m={class:"fixedFullLoading"};function f(e,t,i,l,f,C){const v=(0,s.up)("order-list"),y=(0,s.up)("a-pagination"),k=(0,s.up)("empty-data-placeholder"),x=(0,s.up)("Scroll"),S=(0,s.up)("review-comment-dialog"),_=(0,s.up)("category-ticket-content"),$=(0,s.up)("a-spin"),b=(0,s.up)("a-space");return(0,s.wg)(),(0,s.iD)("div",n,[a,r,c,(0,s.Wm)(x,{class:"content2","probe-type":3,ref:"scroll"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{list:f.listShow},null,8,["list"]),(0,s.wy)((0,s._)("div",d,[(0,s.Wm)(y,{total:f.listAll.length,"show-total":(e,t)=>`${t[0]}-${t[1]} of ${e} items`,"page-size":f.pageSize,"default-current":1,current:f.currentPage,"onUpdate:current":t[0]||(t[0]=e=>f.currentPage=e)},null,8,["total","show-total","page-size","current"])],512),[[o.F8,0!==f.listShow.length]]),0===f.listShow.length?((0,s.wg)(),(0,s.j4)(k,{key:0,description:"暂无工单数据"})):(0,s.kq)("",!0)])),_:1},512),(0,s.wy)((0,s._)("div",h,[(0,s.Wm)(S,{onCancel:C.cancelClick,onEnsure:C.ensureClick,ref:"inputReasonCategory"},null,8,["onCancel","onEnsure"])],512),[[o.F8,f.isShowRightCoverZone]]),f.isShowCoverPage?((0,s.wg)(),(0,s.iD)("div",u)):(0,s.kq)("",!0),(0,s._)("div",p,[(0,s._)("div",g,[(0,s.wy)((0,s._)("div",w,[(0,s.wy)((0,s._)("p",{class:"imageZone",onClick:t[1]||(t[1]=e=>C.hideViewDialog())},null,512),[[o.F8,f.ifShowCancelIcon]]),(0,s.Wm)(x,{ref:"roll",class:"content3"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{ticketContent:f.activeViewItem},null,8,["ticketContent"])])),_:1},512)],512),[[o.F8,!0]])])]),(0,s.wy)((0,s._)("div",m,[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)($,{size:"large"})])),_:1})],512),[[o.F8,f.isLoading]])])}var C=i(467),v=i(61755),y=i(13004),k=i(19755),x=i.n(k),S=i(5050),_=i(40483),$=i(27623),b=i(3577);const z=e=>((0,s.dD)("data-v-1dc77ed7"),e=e(),(0,s.Cn)(),e),I={class:"boardContent"},P={key:0,class:"module"},R=z((()=>(0,s._)("p",{class:"moduleName"},"添加",-1))),D={style:{"font-size":"20px"}},Z={style:{"font-size":"20px"}},L=(0,s.Uk)(" 添加大图为："),A={alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}},U={style:{"font-size":"20px"}},W=(0,s.Uk)(" 添加缩略图为："),V={alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}},q={key:1,class:"module"},N=z((()=>(0,s._)("p",{class:"moduleName"},"更新",-1))),O={class:"moduleContent updateModuleContent"},j={style:{"font-size":"21px","font-weight":"bold",color:"#000"}},F={key:0,style:{"font-size":"20px"}},M={key:1,style:{"font-size":"20px"}},T=(0,s.Uk)(" 修改大图为："),E=["src"],J={key:2,style:{"font-size":"20px"}},B=(0,s.Uk)(" 修改缩略图为："),G=["src"],H={style:{"font-size":"20px"}},K={style:{"font-size":"20px"}},Q=(0,s.Uk)(" 更新大图为："),Y={alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}},X={style:{"font-size":"20px"}},ee=(0,s.Uk)(" 更新缩略图为："),te={alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}},ie={key:2,class:"module"},se=z((()=>(0,s._)("p",{class:"moduleName"},"删除",-1))),oe={style:{"font-size":"20px"}},le={style:{"font-size":"20px"}},ne={style:{"font-size":"20px"}},ae=(0,s.Uk)(" 删除大图为："),re={alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}},ce={style:{"font-size":"20px"}},de=(0,s.Uk)(" 删除缩略图为："),he={alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}};function ue(e,t,i,o,l,n){const a=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.iD)("div",I,[0!==i.ticketContent.add.length?((0,s.wg)(),(0,s.iD)("div",P,[R,(0,s._)("p",D,"添加类别名为："+(0,b.zw)(i.ticketContent.add.name),1),(0,s._)("p",Z,[L,(0,s.wy)((0,s._)("img",A,null,512),[[a,i.ticketContent.add.image]])]),(0,s._)("p",U,[W,(0,s.wy)((0,s._)("img",V,null,512),[[a,i.ticketContent.add.thumbnail]])])])):(0,s.kq)("",!0),0!==i.ticketContent.update.length?((0,s.wg)(),(0,s.iD)("div",q,[N,(0,s._)("div",O,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.ticketContent.update,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"updateModuleContentItem"},[(0,s._)("p",j," id = "+(0,b.zw)(e.id),1),e.name?((0,s.wg)(),(0,s.iD)("p",F," 修改类别名为："+(0,b.zw)(e.name),1)):(0,s.kq)("",!0),e.image?((0,s.wg)(),(0,s.iD)("p",M,[T,(0,s._)("img",{src:e.image,alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}},null,8,E)])):(0,s.kq)("",!0),e.thumbnail?((0,s.wg)(),(0,s.iD)("p",J,[B,(0,s._)("img",{src:e.thumbnail,alt:"",style:{width:"100px",height:"100px","border-radius":"10px"}},null,8,G)])):(0,s.kq)("",!0)])))),128))]),(0,s._)("p",H," 更新类别名为："+(0,b.zw)(i.ticketContent.update.name),1),(0,s._)("p",K,[Q,(0,s.wy)((0,s._)("img",Y,null,512),[[a,i.ticketContent.update.image]])]),(0,s._)("p",X,[ee,(0,s.wy)((0,s._)("img",te,null,512),[[a,i.ticketContent.update.thumbnail]])])])):(0,s.kq)("",!0),0!==i.ticketContent.delete.length?((0,s.wg)(),(0,s.iD)("div",ie,[se,(0,s._)("p",oe,"删除类别id为："+(0,b.zw)(i.ticketContent.delete.id),1),(0,s._)("p",le," 删除类别名为："+(0,b.zw)(i.ticketContent.delete.name),1),(0,s._)("p",ne,[ae,(0,s.wy)((0,s._)("img",re,null,512),[[a,i.ticketContent.delete.image]])]),(0,s._)("p",ce,[de,(0,s.wy)((0,s._)("img",he,null,512),[[a,i.ticketContent.delete.thumbnail]])])])):(0,s.kq)("",!0)])}var pe={name:"e-CategoryTicketContent",props:{ticketContent:{type:Object,default(){return{add:[],update:[],delete:[]}}}}},ge=i(83744);const we=(0,ge.Z)(pe,[["render",ue],["__scopeId","data-v-1dc77ed7"]]);var me=we,fe=(i(92025),{name:"e-Category",beforeRouteEnter(e,t,i){"true"===window.localStorage.getItem("isStaff")?(window.localStorage.setItem("currentIndex010003",0),i()):(i({path:"/tools/login"}),window.localStorage.removeItem("list"),window.localStorage.removeItem("order"),window.localStorage.removeItem("currentIndex010003"),window.localStorage.removeItem("userID"),window.localStorage.removeItem("username"),window.localStorage.removeItem("authToken"),window.localStorage.removeItem("isStaff"),window.localStorage.removeItem("isSuperUser"),window.localStorage.removeItem("isProvider"))},async mounted(){let e={work_line_id:1200};this.isLoading=!0;try{const t=await(0,v.p0)(e);console.log(t);const{Code:i,msg:s}=t;if(200===i&&"success"===s){console.log(t.details.tickets),this.listAll=t.details.tickets.reverse();for(let t=0;t<this.listAll.length;t++)void 0!==this.listAll[t].content.add&&(console.log(t),this.listAll.splice(t,1),t--);this.totalPage=Math.ceil(this.listAll.length/this.pageSize);const e=window.JSON.parse(window.JSON.stringify(this.listAll));0===this.listShow.length&&(this.listShow=e.slice(0,this.pageSize)),this.currentPage===this.totalPage&&(this.listShow=e.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage))}else this.$toast.error("获取工单数据失败 ",240),console.log("获取工单数据失败 ")}catch(t){this.$toast.error("获取工单数据失败  ",240),console.log(t)}this.isLoading=!1,this.$bus.$on("viewDetailsClick",this.viewDetailsClick),this.$bus.$on("passClick",this.passClick),this.$bus.$on("passProduct",this.passProduct),this.$bus.$on("rejectClick",this.rejectClick)},unmounted(){this.$bus.$off("viewDetailsClick",this.viewDetailsClick),this.$bus.$off("passClick",this.passClick),this.$bus.$off("passProduct",this.passProduct),this.$bus.$off("rejectClick",this.rejectClick)},data(){return{listAll:[],listShow:[],pageSize:8,currentPage:1,totalPage:0,isShowCoverPage:!1,viewBoardVisible:!1,x:null,y:null,activeViewItem:{add:[],update:[],delete:[]},isShowRightCoverZone:!1,activeRecordIndex:-1,indexInListShow:-1,isLoading:!1,ifShowCancelIcon:!1}},methods:{passClick(e){this.activeRecordIndex=e,this.$refs.inputReasonCategory.word="通过",this.$refs.inputReasonCategory.message="",this.isShowRightCoverZone=!0,this.isShowCoverPage=!0},passProduct(e){console.log("product passClick item id : ",e),this.activeRecordId=e},viewDetailsClick(e){const{x:t,y:i,index:s}=e;this.x=t,this.y=i;const o=this.x,l=this.y;this.activeViewItem=this.listShow[s].content;const n=this,a=".details";let r;this.isShowCoverPage=!0,this.ifShowCancelIcon=!0;const c=document.body.clientWidth;let d;r=c<1e3?0:c>1e3&&c<1240?(c-1e3)/2:240+(c-240-1e3)/2;let h=document.body.clientHeight;d=h<680?0:(h-680)/2,x()(a).animate({left:o,top:l},50,(function(){n.viewBoardVisible=!0})),x()(a).animate({left:r,top:d,width:"100px",height:"100px"},100,(function(){n.$refs.roll.refresh(),n.$refs.roll.scrollTo(0,0,0)})),x()(a).animate({width:"1000px",height:"680px"},150)},rejectClick(e){this.activeRecordIndex=e,this.$refs.inputReasonCategory.word="拒绝",this.$refs.inputReasonCategory.message="",this.isShowRightCoverZone=!0,this.isShowCoverPage=!0},VMUrlDecode(e){return(0,S.EO)(e)},hideViewDialog(){this.activeViewItem={add:[],update:[],delete:[]},this.ifShowCancelIcon=!1;const e=".details",t=this;x()(e).animate({width:"70px",height:"70px"},50,(function(){})),x()(e).animate({left:t.x,top:t.y,width:"0px",height:"0px"},200,(function(){t.isShowCoverPage=!1}))},async ensureClick(e){if(""!==e){if(this.$refs.inputReasonCategory.ifShowLoadingGif=!0,"通过"===this.$refs.inputReasonCategory.word){console.log(this.listAll[this.activeRecordIndex].id,"id");try{const t=await(0,v.Bb)({id:this.activeRecordId,review_comment:e});200==t.Code?(this.$toast.success("操作成功",240),this.$router.go(0)):(this.$toast.error("操作失败",240),this.$toast.error(t.Msg,240))}catch(t){this.$toast.error("操作失败",240)}this.$refs.inputReasonCategory.ifShowLoadingGif=!1,this.isShowCoverPage=!1,this.isShowRightCoverZone=!1}if("拒绝"===this.$refs.inputReasonCategory.word){try{const t=await(0,v.RL)({id:this.activeRecordId,review_comment:e});200==t.Code?(this.$toast.success("操作成功",240),this.$router.go(0)):(this.$toast.error("操作失败",240),this.$toast.error(t.Msg,240))}catch(t){this.$toast.error("操作失败",240)}this.$refs.inputReasonCategory.ifShowLoadingGif=!1,this.isShowCoverPage=!1,this.isShowRightCoverZone=!1}}else this.$toast.warn("编辑理由不能为空",240)},cancelClick(){this.isShowCoverPage=!1,this.isShowRightCoverZone=!1}},watch:{currentPage(e){const t=window.JSON.parse(window.JSON.stringify(this.listAll));this.listShow=t.slice(this.pageSize*(e-1),this.pageSize*e),this.$refs.scroll.scrollTo(0,0,400),setTimeout((()=>{this.$refs.scroll.refresh()}),200)}},components:{Scroll:C.Z,OrderList:y.Z,ReviewCommentDialog:_.Z,EmptyDataPlaceholder:$.Z,CategoryTicketContent:me}});const Ce=(0,ge.Z)(fe,[["render",f],["__scopeId","data-v-76e749c0"]]);var ve=Ce}}]);
//# sourceMappingURL=728.87d2ecc1.js.map