"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[5133],{83993:function(e,t,i){i.d(t,{Jv:function(){return o},i7:function(){return n},dt:function(){return s}});const o={1e4:"全平台",10001:"iOS",10002:"微信小程序",10003:"服务商"},n={12e3:"紧急",12003:"未读",12004:"已读",11001:"已生效",11e3:"紧急"},s={0:"满减类型"}},7667:function(e,t,i){i.d(t,{Z:function(){return m}});var o=i(66252);const n=e=>((0,o.dD)("data-v-1fcd79ac"),e=e(),(0,o.Cn)(),e),s={class:"center-frame"},l=n((()=>(0,o._)("p",null,"确认删除？",-1))),a=(0,o.Uk)("  ");function d(e,t,i,n,d,r){return(0,o.wg)(),(0,o.iD)("div",s,[l,(0,o._)("div",null,[(0,o._)("button",{class:"cancel other-button",onClick:t[0]||(t[0]=(...e)=>r.cancelClick&&r.cancelClick(...e))},"取消"),a,(0,o._)("button",{class:"ensure other-button",onClick:t[1]||(t[1]=(...e)=>r.ensureClick&&r.ensureClick(...e))},"确认")])])}var r={name:"e-DeleteEnsureDialog2",methods:{ensureClick(){this.$emit("ensureClick")},cancelClick(){this.$emit("cancelClick")}}},c=i(83744);const u=(0,c.Z)(r,[["render",d],["__scopeId","data-v-1fcd79ac"]]);var m=u},57922:function(e,t,i){i.r(t),i.d(t,{default:function(){return ne}});var o=i(66252),n=i(49963);const s=e=>((0,o.dD)("data-v-6bde34ec"),e=e(),(0,o.Cn)(),e),l={id:"coupon"},a=s((()=>(0,o._)("div",{class:"tableHeader"},[(0,o._)("p",null,"优惠券ID"),(0,o._)("p",null,"优惠券名称"),(0,o._)("p",null,"优惠券类型"),(0,o._)("p",null,"优惠金额"),(0,o._)("p",null,"使用条件"),(0,o._)("p",null,"发布日期"),(0,o._)("p",null,"创建理由")],-1))),d=s((()=>(0,o._)("div",{class:"divideLine"},null,-1))),r=s((()=>(0,o._)("div",{class:"emptyDiv"},null,-1))),c={class:"content2"},u={class:"paginationZone"},m={class:"fixedFullLoading"},h={class:"bottom"},p={key:0,class:"add-toast"};function w(e,t,i,s,w,g){const v=(0,o.up)("order-list"),f=(0,o.up)("a-pagination"),_=(0,o.up)("empty-data-placeholder"),b=(0,o.up)("a-spin"),S=(0,o.up)("a-space"),C=(0,o.up)("add-coupon");return(0,o.wg)(),(0,o.iD)("div",l,[a,d,r,(0,o._)("div",c,[(0,o.Wm)(v,{list:w.listShow},null,8,["list"]),(0,o.wy)((0,o._)("div",u,[(0,o.Wm)(f,{total:w.listAll.length,"show-total":(e,t)=>`${t[0]}-${t[1]} of ${e} items`,"page-size":w.pageSize,"default-current":1,current:w.currentPage,"onUpdate:current":t[0]||(t[0]=e=>w.currentPage=e)},null,8,["total","show-total","page-size","current"])],512),[[n.F8,0!==w.listShow.length]]),0===w.listShow.length?((0,o.wg)(),(0,o.j4)(_,{key:0,description:"暂无工单数据"})):(0,o.kq)("",!0)]),(0,o.wy)((0,o._)("div",m,[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large"})])),_:1})],512),[[n.F8,w.isLoading]]),(0,o._)("div",h,[(0,o._)("div",{class:"button",onClick:t[1]||(t[1]=(...e)=>g.showAddCouponDialog&&g.showAddCouponDialog(...e))},"添加优惠券")]),w.ifShowAddCoupon?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(C,{class:"add-coupon",onHideDialog:g.hideAddCouponDialog,onAddCoupon:e.addOneCouponToList},null,8,["onHideDialog","onAddCoupon"])])):(0,o.kq)("",!0)])}const g=e=>((0,o.dD)("data-v-af33bba0"),e=e(),(0,o.Cn)(),e),v={class:"addCoupon"},f={class:"top"},_=g((()=>(0,o._)("div",{class:"title"},"添加优惠券",-1))),b={class:"form"},S={class:"form-item name"},C=g((()=>(0,o._)("label",{for:"coupon-name"},"优惠券名称",-1))),y={class:"form-item"},D=g((()=>(0,o._)("label",{for:"type"},"优惠券类型",-1))),k=g((()=>(0,o._)("option",{value:"0",selected:""},"满减类型",-1))),I=[k],x={class:"form-item"},O=g((()=>(0,o._)("label",{for:"discount"},"优惠数额",-1))),j={class:"form-item"},A=g((()=>(0,o._)("label",{for:"limit"},"使用条件",-1))),M={class:"buttonZone"},z={class:"edit-reason"};function $(e,t,i,s,l,a){const d=(0,o.up)("edit-reason-dialog");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("div",f,[(0,o._)("div",{class:"cancel",onClick:t[0]||(t[0]=(...e)=>a.hideDialog&&a.hideDialog(...e))})]),_,(0,o._)("div",b,[(0,o._)("div",S,[C,(0,o.wy)((0,o._)("input",{type:"text",placeholder:"请输入标题",id:"coupon-name",class:"form-item-content","onUpdate:modelValue":t[1]||(t[1]=e=>l.monitoredMixedObj.name=e),ref:"name",onKeyup:t[2]||(t[2]=(0,n.D2)((t=>e.$refs.limit.focus()),["enter"]))},null,544),[[n.nr,l.monitoredMixedObj.name]])]),(0,o._)("div",y,[D,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.monitoredMixedObj.type=e),id:"type"},I,512),[[n.bM,l.monitoredMixedObj.type]])]),(0,o._)("div",x,[O,(0,o.wy)((0,o._)("input",{type:"text",id:"discount",placeholder:"请填写优惠数额","onUpdate:modelValue":t[4]||(t[4]=e=>l.monitoredMixedObj.discount=e)},null,512),[[n.nr,l.monitoredMixedObj.discount]])]),(0,o._)("div",j,[A,(0,o.wy)((0,o._)("input",{type:"text",id:"limit",placeholder:"请填写使用条件","onUpdate:modelValue":t[5]||(t[5]=e=>l.monitoredMixedObj.limit=e)},null,512),[[n.nr,l.monitoredMixedObj.limit]])])]),(0,o._)("div",M,[(0,o._)("button",{class:"cancelBtn other-button",onClick:t[6]||(t[6]=(...e)=>a.hideDialog&&a.hideDialog(...e))},"取消"),(0,o._)("button",{class:"ensureBtn submit-button",onClick:t[7]||(t[7]=(...e)=>a.checkInput&&a.checkInput(...e))},"确认")]),(0,o.wy)((0,o._)("div",z,[(0,o.Wm)(d,{onCancelClick:a.hideEditReason,onEnsureClick:a.submit},null,8,["onCancelClick","onEnsureClick"])],512),[[n.F8,l.ifShowEditReason]])])}i(55877);var E=i(6819),L=i(81317),P={name:"e-AddCoupon",data(){return{monitoredMixedObj:{name:"",limit:"",discount:"",type:"0"},ifShowEditReason:!1}},methods:{hideDialog(){this.$emit("hideDialog")},checkInput(){""!==this.monitoredMixedObj.name?""!==this.monitoredMixedObj.limit?""!==this.monitoredMixedObj.discount?this.showEditReason():this.$toast.error("请填写优惠数额",240):this.$toast.error("请填写使用条件",240):this.$toast.error("请填写优惠券名称",240)},showEditReason(){this.ifShowEditReason=!0},hideEditReason(){this.ifShowEditReason=!1},async submit(e){let t={name:this.monitoredMixedObj.name,type:this.monitoredMixedObj.type,discount:parseInt(100*Number(this.monitoredMixedObj.discount)),limit:parseInt(100*Number(this.monitoredMixedObj.limit)),create_reason:e};try{const e=await(0,L.vR)(t),{Code:i,msg:o}=e;200===i&&"success"===o?this.$toast.success("提交成功",240):this.$toast.error("提交失败",240)}catch(i){this.$toast.error("提交失败",240)}this.hideEditReason()}},watch:{},components:{EditReasonDialog:E.Z}},R=i(83744);const N=(0,R.Z)(P,[["render",$],["__scopeId","data-v-af33bba0"]]);var Z=N,U=i(7667);const J={id:"order-list"};function W(e,t,i,n,s,l){const a=(0,o.up)("list-item");return(0,o.wg)(),(0,o.iD)("div",J,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.list,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:e.id,class:"list-item"},[(0,o.Wm)(a,{item:e,index:t},null,8,["item","index"])])))),128))])}var H=i(3577);const V={class:"list-item"},F={class:"order-content"};function T(e,t,i,n,s,l){return(0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("div",F,[(0,o._)("div",null,(0,H.zw)(i.item.id),1),(0,o._)("div",null,(0,H.zw)(i.item.name),1),(0,o._)("div",null,(0,H.zw)(s.type[i.item.type]),1),(0,o._)("div",null,(0,H.zw)(Number(i.item.discount)/100),1),(0,o._)("div",null,(0,H.zw)(Number(i.item.limit)/100),1),(0,o._)("div",null,(0,H.zw)(l.setDate(i.item.date_created)),1),(0,o._)("div",null,(0,H.zw)(i.item.create_reason),1)])])}var q=i(5050),B=i(83993),K={name:"e-CouponListItem",props:{item:{type:Object,default(){return{}}},index:{type:Number}},data(){return{type:B.dt}},mounted(){this.$nextTick((()=>{}))},methods:{setDate(e){return(0,q.h3)(e)}},components:{}};const Y=(0,R.Z)(K,[["render",T],["__scopeId","data-v-e68cfae2"]]);var X=Y,G={name:"e-Orderlist",props:{list:{type:Array,default(){return[]}}},methods:{viewDetails(e){var t=e||window.event;let i={x:t.clientX,y:t.clientY};console.log("client:"),console.log(i)}},components:{ListItem:X}};const Q=(0,R.Z)(G,[["render",W]]);var ee=Q,te=i(27623),ie={name:"e-Coupon",beforeRouteEnter(e,t,i){"true"===window.localStorage.getItem("isStaff")?(window.localStorage.setItem("currentIndex010001",3),i()):(i({path:"/tools/login"}),window.localStorage.removeItem("list"),window.localStorage.removeItem("order"),window.localStorage.removeItem("currentIndex010001"),window.localStorage.removeItem("userID"),window.localStorage.removeItem("username"),window.localStorage.removeItem("authToken"),window.localStorage.removeItem("isStaff"),window.localStorage.removeItem("isSuperUser"),window.localStorage.removeItem("isProvider"),window.localStorage.removeItem("providerID"))},beforeRouteLeave(e,t,i){this.updateMark?confirm("还有修改未提交，确定离开？")?(this.couponList=window.JSON.parse(window.JSON.stringify(this.originalCouponList)),i()):(this.$bus.$emit("setCurrentIndex010001To3"),window.localStorage.setItem("currentIndex010001",3),i(!1)):i()},async mounted(){this.isLoading=!0;try{const e=await(0,L.r4)();console.log(e);const{Code:t,msg:i}=e;if(200===t&&"success"===i){console.log(e.details.objs),this.listAll=e.details.objs.reverse(),this.totalPage=Math.ceil(this.listAll.length/this.pageSize);const t=window.JSON.parse(window.JSON.stringify(this.listAll));0===this.listShow.length&&(this.listShow=t.slice(0,this.pageSize)),this.currentPage===this.totalPage&&(this.listShow=t.slice(this.pageSize*(this.currentPage-1),this.pageSize*this.currentPage))}else this.$toast.error("获取工单数据失败 ",240),console.log("获取工单数据失败 ")}catch(e){this.$toast.error("获取工单数据失败  ",240),console.log("获取工单数据失败 ")}this.isLoading=!1},data(){return{ifShowAddCoupon:!1,isLoading:!1,listAll:[],listShow:[],pageSize:8,currentPage:1,totalPage:0,isShowCoverPage:!1,showIndex:-1,x:null,y:null}},methods:{showAddCouponDialog(){this.ifShowAddCoupon=!0},hideAddCouponDialog(){this.ifShowAddCoupon=!1},beforeUnloadHandler(e){this.updateMark&&(e.returnValue="离开此页面?")}},watch:{currentPage(e){const t=window.JSON.parse(window.JSON.stringify(this.listAll));this.listShow=t.slice(this.pageSize*(e-1),this.pageSize*e)}},components:{AddCoupon:Z,DeleteEnsureDialog2:U.Z,EmptyDataPlaceholder:te.Z,OrderList:ee}};const oe=(0,R.Z)(ie,[["render",w],["__scopeId","data-v-6bde34ec"]]);var ne=oe}}]);
//# sourceMappingURL=5133.2a663127.js.map